name: Run Robot Framework Tests

on:
        push:
                branches: ["main"]
        pull_request:

jobs:
        robot-tests:
                runs-on: ubuntu-latest

                steps:
                        - name: Checkout repository
                          uses: actions/checkout@v3

                        - name: Set up Python
                          uses: actions/setup-python@v4
                          with:
                                  python-version: "3.10"

                        - name: Install dependencies
                          run: |
                                  python -m pip install --upgrade pip
                                  pip install -r requirements.txt

                        - name: Install Chrome
                          uses: browser-actions/setup-chrome@v1

                        - name: Install ChromeDriver
                          uses: nanasess/setup-chromedriver@v2

                        - name: Run Robot Framework tests
                          run: |
                                  robot --outputdir MediBook/tests/EZE_tests/results/01_result MediBook/tests/EZE_tests/01_registration.robot
                                  robot --outputdir MediBook/tests/EZE_tests/results/02_result MediBook/tests/EZE_tests/02_search.robot
                                  robot --outputdir MediBook/tests/EZE_tests/results/03_result MediBook/tests/EZE_tests/03_appointment.robot

                        - name: Upload Robot Framework reports
                          uses: actions/upload-artifact@v4
                          with:
                                  name: robot-results
                                  path: tests/EZE_tests/results/
